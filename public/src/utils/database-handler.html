<link rel="import" href="../../bower_components/polymer/polymer.html">

<link rel="import" href="../../bower_components/polymerfire/firebase-query.html">
<link rel="import" href="../../bower_components/polymerfire/firebase-document.html">

<dom-module id="database-handler">
  <template>
    <style>
      :host{
        display: none;
      }
    </style>

    <firebase-query
      id="clientsQuery"
      app-name="factures"
      path="/users/[[uid]]/clients"
      data="{{clientsList}}">
    </firebase-query>

    <firebase-query
      id="devisQuery"
      app-name="factures"
      path="/users/[[uid]]/devis"
      data="{{devisList}}">
    </firebase-query>

    <firebase-query
      id="facturesQuery"
      app-name="factures"
      path="/users/[[uid]]/factures"
      data="{{facturesList}}">
    </firebase-query>

    <firebase-query
      id="prestationsQuery"
      app-name="factures"
      path="/users/[[uid]]/prestations"
      data="{{prestationsList}}">
    </firebase-query>

    <firebase-document
      app-name="factures"
      id="informationsDoc"
      path="/users/[[uid]]/informations"
      data="{{informations}}">
    </firebase-document>

    <firebase-document
      app-name="factures"
      id="tmpDoc"
      path="/users/[[uid]]/{{path}}"
      data="{{tmpData}}">
    </firebase-document>

  </template>
  <script>
    Polymer({
      is: 'database-handler',

      properties: {
        uid: {
          type: String,
        },
        path: {
          type: String,
        },
      },

      observers: [
        'clientsCh(clientsList.*)'
      ],

      clientsCh: function (cr) {
        console.log(cr);
      },

      getClientsList: function () {
        return (this.clientsList);
      },
      getDevisList: function () {
        return (this.devisList);
      },
      getFacturesList: function () {
        return (this.facturesList);
      },
      getPrestationsList: function () {
        return (this.prestationsList);
      },
      getInformation: function () {
        return (this.informations);
      },
      set: function (path, value) {
        this.path = path;
        this.set('tmpData', value);
      },
      remove: function (path) {
        this.path = path;
        this.$.tmpDoc.destroy();
      },
    })
  </script>
</dom-module>
