<link rel="import" href="/bower_components/polymer/polymer.html">

<link rel="import" href="/bower_components/iron-flex-layout/iron-flex-layout.html">
<link rel="import" href="/bower_components/iron-flex-layout/iron-flex-layout-classes.html">

<link rel="import" href="/bower_components/paper-card/paper-card.html">
<link rel="import" href="/bower_components/paper-button/paper-button.html">

<link rel="import" href="/bower_components/polymerfire/firebase-document.html">

<link rel="import" href="/src/shared-styles.html">

<dom-module id="devis-detail">
  <template>
    <style is="custom-style" include="shared-styles iron-flex iron-positioning iron-flex-alignment">
      :host {
        display: block;
      }

      .devis-layout {
        font-weight: 300;
        padding: 10px;
      }

      .entete {
        margin-bottom: 15px;
      }

      .entete .entreprise-info {
        margin-right: 15px;
      }

      .devis-info p {
        margin: 5px 0px;
      }

      .devis-info {
        margin-bottom: 15px;
      }

      @media screen and (max-width: 768px) {
        .horizontal.layout.entete {
          display: inline-block;
        }
        .entreprise-info {
          margin-right: 0px;
          margin-bottom: 15px;
          width: 100%;
          float: left;
        }

        .client-info {
          width: 100%;
          float: left;
        }
      }
    </style>

    <firebase-document
      app-name="factures"
      id="client"
      path="/users/[[uid]]/clients/[[devis.client_key]]"
      data="{{client}}">
    </firebase-document>

    <div class="vertical layout devis-layout">

      <!-- Début en-tête -->
      <div class="horizontal layout entete">

        <!-- Informations Entreprise -->
        <paper-card class="entreprise-info">
          <div class="card-content">
            <table>
              <tbody>
                <tr>
                  <td>
                    {{user.name}}
                  </td>
                </tr>
                <tr>
                  <td>
                    {{user.address}}
                  </td>
                </tr>
                <tr>
                  <td>
                    {{user.email}}
                  </td>
                </tr>
                <tr>
                  <td>
                    {{user.phone_number}}
                  </td>
                </tr>
              </tbody>
            </table>
          </div>
        </paper-card>

        <div class="flex"></div>

        <!-- Informations Client -->
        <paper-card class="client-info">
          <div class="card-content">
            <table>
              <tbody>
                <tr>
                  <td>
                    {{client.name}}
                  </td>
                </tr>
                <tr>
                  <td>
                    {{client.address}}
                  </td>
                </tr>
                <tr>
                  <td>
                    {{client.email}}
                  </td>
                </tr>
                <tr>
                  <td>
                    {{client.phone_number}}
                  </td>
                </tr>
              </tbody>
            </table>
          </div>
        </paper-card>

      </div>
      <!-- Fin en-tête -->

      <!-- Début informations devis -->
      <paper-card class="devis-info" on-tap="test">
        <div class="card-content horizontal layout">
          <div>
            <p>{{devis.name}}</p>
          </div>
          <div class="flex"></div>
          <div class="vertical layout">
            <p>{{devis.date}}</p>
            <p>{{devis.hour}}</p>
          </div>
        </div>
      </paper-card>
      <!-- Fin informations devis -->

      <!-- Début liste articles -->
      <paper-card class="articles-list">
        <div class="vertical layout">
          <table>
            <thead>
              <tr>
                <th>
                  Article
                </th>
                <th>
                  Quantité
                </th>
                <th>
                  Prix
                </th>
                <th>
                  Total
                </th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td>
                  Article 1
                </td>
                <td>
                  5
                </td>
                <td>
                  25.99 €
                </td>
                <td>
                  129.95 €
                </td>
              </tr>
              <tr>
                <td>
                  Article 1
                </td>
                <td>
                  5
                </td>
                <td>
                  25.99 €
                </td>
                <td>
                  129.95 €
                </td>
              </tr>
              <tr>
                <td>
                  Article 1
                </td>
                <td>
                  5
                </td>
                <td>
                  25.99 €
                </td>
                <td>
                  129.95 €
                </td>
              </tr>
              <tr>
                <td>
                  Article 1
                </td>
                <td>
                  5
                </td>
                <td>
                  25.99 €
                </td>
                <td>
                  129.95 €
                </td>
              </tr>
              <tr>
                <td>
                  Article 1
                </td>
                <td>
                  5
                </td>
                <td>
                  25.99 €
                </td>
                <td>
                  129.95 €
                </td>
              </tr>
            </tbody>
          </table>
        </div>
        <div class="card-actions horizontal layout end-justified">
          <p>Total: XXX €</p>
        </div>
      </paper-card>
      <!-- Fin liste articles -->

    </div>

  </template>
  <script>
    Polymer({
      is: 'devis-detail',

      properties: {
        user: {
          type: Object
        },
        client: {
          type: Object
        },
        devis: {
          type: Object
        }
      },

      test: function () {
        console.log(this.key);
        console.log(this.devis);
        console.log(this.client);
      }
    });
  </script>
</dom-module>
